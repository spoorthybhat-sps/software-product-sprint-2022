<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>My Portfolio</title>
    <link rel="stylesheet" href="signUp.css" />
    <script src="script.js"></script>
    
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h2>Create Account</h2>
      </div>
      <form id="form" class="form" >
        <div class="form-control">
          <label for="username">Username</label>
          <input type="text" placeholder="abcd123" id="username" name="userName"/>
        </div>
        <div class="form-control">
          <label for="username">Email</label>
          <input type="email" placeholder="abc123@gmail.com" id="email" name="email"/>
        </div>
        <div class="form-control">
          <label for="username">Password</label>
          <input type="password" placeholder="Password" id="password" name="passWord" />
        </div>
        <div class="form-control">
          <label for="username">Rewrite Password</label>
          <input
            type="password"
            placeholder="Rewrite Password "
            id="rewritePassword"
          />
          
        </div>
        <input id="signUp" type="submit" value="Sign Up">
        <!-- <button id="signUp" onclick="signUp">Sign Up</button> -->
        <div id="signIn">
          <p>Already registered <a href="index.html">sign in?</a></p>
        </div>
      </form>
    </div>
    <!-- <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.4/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
        </script>
        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.4/firebase-auth.js";
            </script>
            <script type="module">
                import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.4/firebase-database.js";
                </script>
    <script src="script.js"></script> -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.4/firebase-app.js";
        import { getDatabase, set, ref, update } from "https://www.gstatic.com/firebasejs/9.8.4/firebase-database.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.8.4/firebase-auth.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAh50tKq3hCpvevF-UUrYyDg5kpzJ_XCT4",
             authDomain: "summer22-sps-25.firebaseapp.com",
             databaseURL: "https://summer22-sps-25-default-rtdb.firebaseio.com",
             projectId: "summer22-sps-25",
            storageBucket: "summer22-sps-25.appspot.com",
             messagingSenderId: "471830306552",
             appId: "1:471830306552:web:9b6e1d5f76156fc077650d"
  };
          //yout config code
        
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const auth = getAuth();
      
      sighUp.addEventListener('click',(e) => {
      
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;
        var username = document.getElementById('username').value;
      
        createUserWithEmailAndPassword(auth, email, password)
          .then((userCredential) => {
           // Signed in 
            const user = userCredential.user;
      
            set(ref(database, 'users/' + user.uid),{
                username: username,
                email: email
            })
      
            alert('user created!');
            // ...
          })
          .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
      
            alert(errorMessage);
          // ..
          });
      
      });
      
       login.addEventListener('click',(e)=>{
         var email = document.getElementById('email').value;
         var password = document.getElementById('password').value;
      
            signInWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
              // Signed in 
              const user = userCredential.user;
      
              const dt = new Date();
               update(ref(database, 'users/' + user.uid),{
                last_login: dt,
              })
      
               alert('User loged in!');
              // ...
            })
            .catch((error) => {
              const errorCode = error.code;
              const errorMessage = error.message;
      
              alert(errorMessage);
        });
      
       });
       </script>
  </body>
</html>
