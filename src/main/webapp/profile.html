<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Profile Page</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="profile.css">
  <link rel="stylesheet" href="feed.css">
</head>
<body>
  <div class="container-xxl">
    <div class="main">
      <div class="row">
        <div id="left-panel">
          <div class="flex-hor space-around" id="logo-box">
            <image src="images/logo.png" alt="logo" />
            <h1>Pizzy</h1>
          </div>
          <div class="margin-auto" style="text-align: center;">
          <img src="images/profile.jpg" class="rounded-circle" width="150">
          <form action="#about">
            <button type="submit" id="left-create-button">About</button>
          </form>
          <form action="#friends">
            <button type="submit" id="left-create-button">Friends</button>
          </form>
          <form action="#groups">
            <button type="submit" id="left-create-button">Groups</button>
          </form>
          <form action="#recipes">
            <button type="submit" id="left-create-button">Recipes</button>
          </form>
          <form action="update.html">
            <button type="submit" id="left-create-button">Update</button>
          </form>
          </div>
        </div>

        <div class="col-md-10 mt-1">

          <div class="card mb-3 content">
            <h1 id="about" class="m-3 pt-3">About</h1>
            <div class="card-body">
              <div class="row">
                <div class="col-md-3">
                  <h5>Full Name</h5>
                </div>
                <div id="P-name" class="col-md-9 text-secondary">
                  Michael Smith
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-md-3">
                  <h5>Username</h5>
                </div>
                <div id="P-username" class="col-md-9 text-secondary">
                  Mickey_Mouse
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-md-3">
                  <h5>Email</h5>
                </div>
                <div id="P-email" class="col-md-9 text-secondary">
                  abc@gmail.com
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-md-3">
                  <h5>Phone</h5>
                </div>
                <div id="P-phone" class="col-md-9 text-secondary">
                  123456789
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-md-3">
                  <h5>Address</h5>
                </div>
                <div id="P-address" class="col-md-9 text-secondary">
                  442 Country Street Muskego, WI 53150
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-md-3">
                  <h5>Date of Birth</h5>
                </div>
                <div id="P-birth" class="col-md-9 text-secondary">
                  March 28, 2000
                </div>
              </div>
            </div>
          </div>

          <div class="card mb-3 content">
            <h1 id="friends" class="m-3 pt-3">Friends</h1>
            <div class="card-body">
              <div class="row">
                <div class="col-md-1">
                  <!-- <h5>Full Name</h5> -->
                  <img src="images/profile.jpg" class="rounded" width="70">
                </div>
                <div class="col-md-9 mt-3 text-secondary">
                  <h5>Diana Zuhura</h5>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-md-1">
                  <!-- <h5>Full Name</h5> -->
                  <img src="images/profile.jpg" class="rounded" width="70">
                </div>
                <div class="col-md-9 mt-3 text-secondary">
                  <h5>Neptuno Zoe</h5>
                </div>
              </div>
            </div>
          </div>

          <div class="card mb-3 content">
            <h1 id="groups" class="m-3 pt-3">Groups</h1>
            <div class="card-body">
              <div class="row">
                <div class="col-md-1">
                  <!-- <h5>Full Name</h5> -->
                  <img src="images/profile.jpg" class="rounded" width="70">
                </div>
                <div class="col-md-9 mt-3 text-secondary">
                  <h5>Crazy cakes</h5>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-md-1">
                  <!-- <h5>Full Name</h5> -->
                  <img src="images/profile.jpg" class="rounded" width="70">
                </div>
                <div class="col-md-9 mt-3 text-secondary">
                  <h5>Meat Kings</h5>
                </div>
              </div>
            </div>
          </div>

          <div class="card mb-3 content">
            <h1 id="recipes" class="m-3 pt-3">Recipes</h1>
            <div class="card-body">
              <div class="row">
                <div class="col-md-1">
                  <!-- <h5>Full Name</h5> -->
                  <img src="images/profile.jpg" class="rounded" width="70">
                </div>
                <div class="col-md-9 mt-3 text-secondary">
                  <h5>Skirt steak</h5>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-md-1">
                  <!-- <h5>Full Name</h5> -->
                  <img src="images/profile.jpg" class="rounded" width="70">
                </div>
                <div class="col-md-9 mt-3 text-secondary">
                  <h5>Pay of lemon</h5>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.4/firebase-app.js";
  import { getDatabase, set, get, child, ref, update } from "https://www.gstatic.com/firebasejs/9.8.4/firebase-database.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.8.4/firebase-auth.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyAh50tKq3hCpvevF-UUrYyDg5kpzJ_XCT4",
    authDomain: "summer22-sps-25.firebaseapp.com",
    projectId: "summer22-sps-25",
    storageBucket: "summer22-sps-25.appspot.com",
    messagingSenderId: "471830306552",
    appId: "1:471830306552:web:40403b37cf5fb8eb77650d"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);
  const auth = getAuth();

  const user = auth.currentUser;

  onAuthStateChanged(auth, (user) => {
    if (user) {
      // User is signed in, see docs for a list of available properties
      // https://firebase.google.com/docs/reference/js/firebase.User
      const uid = user.uid;
      alert("Active user "+ user.email);
      
      const dbref = ref(database);

      get(child(dbref,'users/' + user.uid)).then((snapshot)=>{
        if(snapshot.exists()){
          // namebox.value = snapshot.val().NameOfStd;
          document.getElementById('P-name').innerHTML = snapshot.val().name;
          document.getElementById('P-username').innerHTML = snapshot.val().username;
          document.getElementById('P-email').innerHTML = snapshot.val().email;
          document.getElementById('P-phone').innerHTML = snapshot.val().phone;
          document.getElementById('P-address').innerHTML = snapshot.val().address;
          document.getElementById('P-birth').innerHTML = snapshot.val().birth;
        }

        else{
          alert("No data found");
        }
      })
      .catch((error)=>{
        alert("Unsuccessful, error "+error);
      });


      // ...
    } else {
      // User is signed out
      alert("No active user Found");
      // ...
    }
  });

</script>

</html>